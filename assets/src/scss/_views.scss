// ==== VIEWS ==== //

.view-options {
  @extend %button-container;
  display: none;
  button {
    position: relative;
    &:hover {
      border-radius: 3px 3px 0 0;
    }
  }
  @include respond-to(medium) {
    display: inline-block;
  }
}



// == GALLERY VIEW == //

.gallery-view {
  figure.wp-caption {
    @include image-overlay(".wp-caption-text", "title");
    // Assumes `float: left` is set elsewhere
    img {
      @include border-radius;
      display: block; // Gets rid of some pesky whitespace issues; only necessary here because gallery view doesn't wrap posts in .entry-content
    }
  }

  // Responsive gallery view; not especially DRY but it has the advantage of being targetted and precise; no wasted CSS here
  // Won't produce neat 30px margins between images on Firefox because of cross-browser scrollbar inconsistencies; not important enough to fix with JavaScript hackery

  // Custom breakpoints specifically for gallery view
  // Note there will be some minor quirks due to slight differences between these custom breakpoints and those of the rest of the site's interface
  $b-gallery-small: 320 + $spacer*2; // The viewport has to get quite small to trigger this breakpoint but we don't want to lose quality by upscaling the 320px third-square image size
  $b-gallery-medium: 640 + $d-image-spacer + $spacer*3; // Extra spacer at this width as per layout-box mixin
  @include k-media-below($b-gallery-small) {
    .img-group figure.wp-caption {
      margin: 0 0 $d-image-spacer 0;
      max-width: 100%;
    }
  }
  @include k-media-between($b-gallery-small, $b-gallery-medium) {
    $margin-width: $d-image-spacer / 640px;
    .img-group figure.wp-caption {
      margin: 0 percentage($margin-width) percentage($margin-width) 0;
      max-width: percentage(1/2) - percentage($margin-width/2);
      &:nth-of-type(2n) {
        margin-right: 0;
      }
      &:nth-of-type(2n+1) {
        clear: left;
      }
    }
  }
  @include k-media-above($b-gallery-medium) {
    .img-group figure.wp-caption {
      // Calculations based on $content-width presume that gallery view is always full-width
      margin: 0 percentage($d-image-spacer / $content-width) percentage($d-image-spacer / $content-width) 0;
      max-width: percentage(1/3) - percentage( ( ($d-image-spacer * 2 ) / $content-width) / 3 );
      &:nth-of-type(3n) {
        margin-right: 0;
      }
      &:nth-of-type(3n+1) {
        clear: left;
      }
    }
  }
}



// == LIST VIEW == //

// @TODO: needs a lot of work; this is merely a prototype
.list-view {
  .entry-header {
    @include k-clearfix-reset(below);
  }
  :not(.no-results) h1.entry-title { // @TODO: make sure only relevant article titles are shrunk
    @include font-size($s-text-small);
    margin-bottom: 0;
  }
  article {
    @include rem('margin-bottom', $spacer*2);
  }
  .entry-content-wrapper {
    margin-left: 150px + $spacer;
  }
  .entry-meta {
    @include k-clearfix-reset(above);
  }
  .last-updated {
    @include hide;
  }
  &.full-width {
    h1.entry-title {
      @include font-size($s-header);
      margin-bottom: 0;
    }
  }
}
.entry-thumbnail {
  float: left;
  width: 150px;
  figure.wp-caption {
    margin: 0;
  }
  img {
    @include border-radius;
  }
}



// == EXCERPT VIEW == //

// Nothing needed here just yet
