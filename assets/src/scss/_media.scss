// ==== MEDIA ==== //

// == CAPTIONS == //

:not(figure).wp-caption {
  @extend %spacer-below;
  max-width: 100%; // Keep wide captions from overflowing their containers
}
.entry-caption,
.wp-caption-text {
  @extend %clearfix-below;
  @include font-size($s-text-smaller);
  @include reverse-italics;
  color: $c-caption;
}



// == IMAGE LAYOUT == //

// Individual responsive images in posts, not comments; isolating these declarations from _content.scss reduces bloat
figure.wp-caption,
.entry-content p img {
  overflow: auto; // Without this the floats won't float
  &.alignleft {
    margin-right: percentage($spacer / $main-width);
  }
  &.alignright {
    margin-left: percentage($spacer / $main-width);
  }
  &.alignnone { // @TODO: fix known issue, aligncenter class not working on captioned images
    @extend %clearfix;
    margin-left: 0;
    margin-right: 0;
  }
}

// Grouping responsive partial-width images; borrows technique seen in _gallery.scss
.image-group,
.thumb-view .site-main {
  @extend %clearfix;
  @extend %spacer-below;
  @if $spacer != $d-image-spacer {
    & + .image-group { // Nicer layout for successive image groups
      @include rem('margin-top', -($spacer - $d-image-spacer) ); // Assumes $spacer > $d-image-spacer
    }
  }
  figure.wp-caption {
    float: left;
    margin: 0 percentage($d-image-spacer / $main-width) percentage($d-image-spacer / $main-width) 0;
    width: 100%;
    &.size-third,
    &.size-third-square {
      max-width: percentage(1/3) - percentage( ( ($d-image-spacer * 2) / $main-width) / 3);
      &:nth-of-type(3n) {
        margin-right: 0;
      }
      &:nth-of-type(3n+1) {
        clear: left;
      }
    }
    &.size-half,
    &.size-half-square {
      max-width: percentage(1/2) - percentage( ($d-image-spacer / $main-width) / 2);
      &:nth-of-type(2n) {
        margin-right: 0;
      }
      &:nth-of-type(2n+1) {
        clear: left;
      }
    }
  }
}



// == IMAGE METADATA == //

.image-info {
  @extend %spacer-above;
  @include rem('padding-top', $spacer, 1);
  border-top: $d-divider;
}
.image-description {
  @include font-size($s-text-small);
}
