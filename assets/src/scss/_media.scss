// ==== MEDIA ==== //

// Captions
.wp-caption {
  @extend %spacer-below;
  max-width: 100%; // Keep wide captions from overflowing their containers
}
.wp-caption .wp-caption-text,
.entry-caption {
  @include font-sizer($h4);
  color: $c-caption;
  font-style: italic;
}



// Image attachment metadata
.image-info {
  @include rem('padding-top', $spacer, 1);
  @extend %spacer-above;
  border-top: $divider;
}
.image-description {
  @include font-sizer($h4);
}



// Emoticons; should be destroyed
img.wp-smiley,
.rsswidget img {
  border: 0;
  border-radius: 0;
  box-shadow: none;
  display: inline;
  margin-bottom: 0;
  margin-top: 0;
  padding: 0;
  vertical-align: baseline;
}



// Gallery styling; makes a lot of assumptions about markup so you can't simply lift this and use it elsewhere
// Presently attempting a free-flowing gallery based on unordered lists; could also try CSS3 columns
// @TODO: account for vertical rhythm
// @TODO: finish this component; currently it isn't production-ready at all
$gallery-padding: 5px;

.gallery {
  overflow: hidden;
  ul {
    line-height: 0;
    list-style: none;
    margin-right: -$gallery-padding;
  }
  .gallery-item {
    @include rem('padding-right', $gallery-padding);
    box-sizing: border-box; // Make everyone's life easier
    display: inline-block;
    margin: 0;
    overflow: hidden;
    position: relative;
    img {
      backface-visibility: hidden; // Prevents flicker
      margin-bottom: $gallery-padding;
      width: 100%;
      transition: all .5s ease-out;
    }
    &:hover {
      .gallery-caption-text {
        opacity: 1;
        transition: opacity .5s ease;
      }
      img {
        filter: brightness(70%) grayscale(100%);
        transition: all .3s ease-in;
      }
    }
  }
  // @TODO: mask caption text that overflows the bounding box; not a problem with short titles/captions but looks ugly when it goes wrong
  .gallery-caption-text {
    @include font-sizer($h5);
    @include rem('padding', 0 $gallery-padding + 5px 0 $gallery-padding );
    box-sizing: border-box;
    color: #fff;
    cursor: pointer;
    font-style: italic;
    margin: 0 auto;
    opacity: 0;
    position: absolute;
      top: 0;
      z-index: 5;
    text-align: center;
    text-shadow: 0px 1px rgba(#000, 0.75);
    transition: opacity .3s ease;
    width: 100%;
  }
  .gallery-caption-title {
    @include font-sizer($h3);
  }
}

// Generate columns
@for $i from 1 to 11 {
  .gallery-columns-#{$i} .gallery-item {
    width: percentage(1/($i));
  }
}
