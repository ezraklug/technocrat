<?php // ==== ICONS ==== //

// Request an icon from the icon sheet
// @TODO: check to see if an icon exists before printing anything
// @TODO: make this more accessible: http://www.sitepoint.com/tips-accessible-svg/
if ( !function_exists( 'pendrell_icon' ) ) : function pendrell_icon( $icon = '', $title = '', $description = '' ) {

  // Initialize
  $contents = '';

  // Check for a title
  if ( !empty( $title ) ) {
    $title_aria = ' aria-labelledby="title"';
    $title_html = '<title>' . $title . '</title>';
  } else {
    $title_aria = $title_html = '';
  }

  // Generate the markup
  $contents = '<svg class="icon" role="img"' . $title_aria . '>' . $title_html . '<use xlink:href="#i-' . $icon . '" /></use></svg>';

  return $contents;

} endif;



// Add the master icon sheet to the page
// @TODO: move this to the bottom when browser support improves
if ( !function_exists( 'pendrell_icon_sheet' ) ) : function pendrell_icon_sheet() {

  // Path to the icon sheet generated by Gulp
  $file = get_template_directory() . '/svg/icons.svg';

  // Check if requested file exists; if not, return early
  if ( !file_exists( $file ) )
    return;

  // Retrieve the contents of the file
  $icons = file_get_contents( $file );

  // Add the icons to the page
  echo $icons;

} endif;
add_action( 'pendrell_body_before', 'pendrell_icon_sheet' );
