// ==== LAYOUT ==== //

// Overall site layout
.site {
  box-sizing: border-box;
  overflow: inherit; // Fixes weird IE display (July 8, 2015)
}

// == WRAPPERS == //

// These wrappers allow for backgrounds and layout options to be defined for each of the four sections (header, content, sidebar, and footer)
// There is also a fifth meta-wrapper to bind content and sidebar on large screens in two column mode
%wrap {
  box-sizing: border-box; // Makes life a little easier
  @include k-media-below( break(small) ) {
    @include rem( padding-left, spacer(1/2) );
    @include rem( padding-right, spacer(1/2) );
  }
  @include k-media-between( break(small), break(medium) ) {
    @include rem( padding-left, spacer() );
    @include rem( padding-right, spacer() );
  }
  @include k-media-above( break(medium) ) {
    @include rem( padding-left, spacer(1.5) );
    @include rem( padding-right, spacer(1.5) );
  }
}
.wrap-header,
.wrap-footer {
  @extend %wrap;
  position: relative; // Header contains #site-interface, which is absolutely positioned; footer contains "back to top" button
}



// == MAIN LAYOUT == //

// One or two column layouts are both supported
@mixin two-column( $width: $width-medium ) {
  .wrap-main {
    @extend %clearfix;
    @include k-media-above( break(large) ) {
      @include scut-center-block( $width-content );
      @include rem( padding-left, spacer(1.5) );
      @include rem( padding-right, spacer(1.5) );
    }
  }
  .wrap-content {
    @extend %wrap;
    @include rem( padding-top, spacer() );
    @include rem( padding-bottom, spacer() );
    @include k-media-above( break(large) ) {
      @include rem( padding-right, spacer() );
      float: left;
      max-width: $width;
      padding-left: 0;
      width: percentage( $width / $width-content );
      &:only-child {
        float: none;
        max-width: $width-content;
        padding-right: 0;
        width: 100%;
      }
    }
  }
  .wrap-sidebar {
    @extend %wrap;
    @include rem( padding-top, spacer() );
    @include rem( padding-bottom, spacer() );
    @include k-media-above( break(large) ) {
      @include rem( padding-left, spacer() );
      float: right;
      max-width: $width-content - $width;
      padding-right: 0;
      width: percentage( 1 - ( $width / $width-content ) );
    }
  }
}
@mixin one-column {
  .wrap-content,
  .wrap-sidebar {
    @extend %clearfix;
    @extend %wrap;
    @include rem( padding-top, spacer() );
    @include rem( padding-bottom, spacer() );
  }
  .site-content,
  .site-sidebar {
    @include scut-center-block( $width-content );
  }
}
@if module(one-column) {
  @include one-column;
} @else {
  @include two-column;
}



// == HEADER == //

.site-header {
  @include rem( padding-top, spacer() );
  @include scut-center-block( $width-content );
  position: relative; // For use with the skip link and menu toggle
}
.site-branding {
  @include rem( padding-bottom, spacer(1/2) );
  &:hover .site-description { // Show site description on hover
    opacity: 1;
    transition: opacity .6s ease;
    transition-delay: .43s;
  }
}
.site-title {
  @extend %clearfix-below;
  @include font-style(site-title);
}
.site-description {
  @extend %clearfix-below;
  @extend %hide-below-medium; // Hide the site description on smaller screens
  @include font-style(site-description);
  opacity: 0;
  transition: opacity .8s ease-out;
}
.site-interface { // Site interface: the toolbar/menu at top right
  @include k-absolute( right 0 top spacer() );
  display: block;
}
.site-navigation {
  @extend %max-width-100; // Prevents hidden search box from overflowing container
  @include k-media-above( break(medium) ) {
    display: block !important; // Prevents the responsive menu display state from hiding the menu on larger screens after a resize
  }
  @include k-media-below( break(medium) ) {
    display: none;
  }
}



// == CONTENT == //

.site-content {
  @extend %clearfix-below;
  word-wrap: break-word; // Keep text content from overflowing
  &:focus {
    outline: none; // Prevent weird blue glow when using the skip link
  }
  article {
    @extend %spacer-below-triple; // Individual articles within the content area
  }
}
main {
  @extend %clearfix; // Mainly for gallery view (in which main is filed with floating figure elements)
}
.main-title {
  @extend %spacer-below-half;
  @include font-style(main-title);
}
.main-desc {
  @extend %clearfix-above;
  @extend %links;
  @extend %spacer-below-double;
  @include font-style(main-desc);
  p {
    @extend %spacer-below;
  }
}



// == SIDEBAR == //

// See also: `_widgets.scss`
.site-sidebar {
  @extend %clearfix-below;
}



// == FOOTER == //

.site-footer {
  @include scut-center-block( $width-content );
  @include rem( padding-bottom, spacer() );
  color: colour(footer);
}
.site-footer-info {
  @extend %links-meta-no-border;
  @extend %text-smallest;
}
