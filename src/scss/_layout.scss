// ==== LAYOUT ==== //

// Overall site layout
.site {
  box-sizing: border-box;
  overflow: inherit; // Fixes weird IE display (July 8, 2015)
}

// == WRAPPERS == //

// These wrappers allow for backgrounds and layout options to be defined for each of the four sections (header, content, sidebar, and footer)
// There is also a fifth meta-wrapper to bind content and sidebar on large screens

// A general wrapper for various site elements
%wrap {
  box-sizing: border-box; // Makes life a little easier
  @include k-media-below( break(small) ) {
    @include rem( padding-left, spacer(1/2) );
    @include rem( padding-right, spacer(1/2) );
  }
  @include k-media-between( break(small), break(medium) ) {
    @include rem( padding-left, spacer() );
    @include rem( padding-right, spacer() );
  }
  @include k-media-above( break(medium) ) {
    @include rem( padding-left, spacer(1.5) );
    @include rem( padding-right, spacer(1.5) );
  }
}
.wrap-header,
.wrap-sidebar {
  @include k-media-above( break(large) ) {
    @include rem( padding-left, spacer() );
    float: right;
    width: 33%;
  }
}
.wrap-header {
  @extend %wrap;
  @include rem( padding-top, spacer(1/2) );
  background: colour(bg-header);
  @include k-media-above( break(medium) ) {
    @include rem( padding-top, spacer() );
  }
}
.wrap-main {
  @extend %clearfix-below;
}
.wrap-sidebar {
  @extend %wrap;
  @include rem( padding-top, spacer() );
  @include rem( padding-bottom, spacer() );
  background: colour(bg-sidebar);
  height: auto;
}
.wrap-content {
  @extend %wrap;
  @include k-media-above( break(large) ) {
    float: left;
    padding: 0;
    width: 67%;
  }
  @include k-media-below( break(large) ) {
    background: colour(bg-content);
  }
}
.wrap-footer {
  @extend %wrap;
  background: colour(bg-footer);
  @include k-media-above( break(large) ) {
    padding: 0;
  }
}



// == HEADER == //

.site-header {
  position: relative; // For use with the skip link and menu toggle
  @include k-media-above( break(large) ) {
    max-width: $width-content - $width-main;
  }
}
.site-branding {
  @extend %spacer-below-half;
  @include k-media-above( break(large) ) {
    @include rem( padding-bottom, spacer() );
  }
  &:hover .site-description { // Show site description on hover
    opacity: 1;
    transition: opacity .6s ease;
    transition-delay: .43s;
  }
}
.site-title {
  @extend %clearfix-below;
  @include font-size(site-title-small);
  @include font-style(site-title);
  white-space: nowrap;
  @include k-media-above( break(medium) ) {
    @include font-size(site-title-big);
  }
  a {
    color: colour(site-title);
    display: inline-block;
    text-decoration: none;
    &:hover {
      color: colour(highlight);
    }
  }
  svg.icon {
    @include rem( margin, 0 4px 0 -3px );
    @include rem( height, 35px );
    @include rem( width, 35px );
    color: k-colour(raven);
    transform: scale(-1,1) rotate(180deg);
    transition: all .56s ease-out;
    vertical-align: bottom;
    @include k-media-below( break(medium) ) {
      @include rem( margin, 0 2px 0 -3px );
      @include rem( height, 24px );
      @include rem( width, 24px );
    }
  }
  &:hover {
    svg.icon {
      transition: all 1.4s ease;
      transform: scale(-1,1) rotate(-180deg);
    }
  }
}
.site-description {
  @extend %clearfix-below;
  @include font-size(text-smaller);
  @include font-style(site-description);
  color: colour(site-desc);
  opacity: 0;
  transition: opacity .8s ease-out;
  @include k-hide-visually; // No description in this theme
}
.site-navigation {
  max-width: 100%; // Prevents hidden search box from overflowing container
  @include k-media-below( break(medium) ) {
    display: none;
    padding-bottom: spacer(1/2);
  }
}
.site-interface { // Site interface: the toolbar/menu at top right
  @extend %clearfix-below;
  > * {
    @include k-media-below( break(large) ) {
      @include rem( margin-bottom, spacer(1/2) );
    }
  }
}



// == CONTENT == //

.site-content {
  @extend %clearfix-below;
  @include rem( padding-top, spacer() );
  @include rem( padding-bottom, spacer() );
  background: colour(bg-content);
  max-width: $width-main; // Keeps content contained regardless of whether sidebar appears
  word-wrap: break-word; // Keep text content from overflowing
  &:focus {
    outline: none; // Prevent weird blue glow when using the skip link
  }

  @include k-media-above( break(large) ) {
    @include rem( padding, spacer(3.5) spacer(2) spacer() spacer(2) );
    @include rem( padding-right, spacer(2) );
    margin-left: auto;
  }

  // Individual articles within the content area
  article {
    @extend %spacer-below-triple;
  }
}
main {
  @extend %clearfix; // Mainly for gallery view (in which main is filed with floating figure elements)
}



// == SIDEBAR == //

// See also: `_widgets.scss`
@mixin sidebar-columns {
  @include rem( column-gap, spacer(2) );
  columns: auto 2; // @TODO: Selectric boxes don't play well with the sidebar in column mode :/
  overflow: hidden; // Required to hide extra space in Chrome
  position: relative; // Required to hide extra space in Chrome
  .widget {
    display: inline-block;
    width: 100%;
  }
}
.site-sidebar {
  max-width: $width-main; // Keeps things tidy
  @include k-media-between( break(small), break(large) ) {
    @include sidebar-columns;
  }
  @include k-media-above( break(large) ) {
    max-width: $width-content - $width-main;
  }
}



// == FOOTER == //

.site-footer {
  @include rem( padding-bottom, spacer() );
  position: relative; // For use with the "Back to top" button
  @include k-media-above( break(large) ) {
    @include rem( padding-left, spacer(2) );
    margin-left: auto;
    max-width: $width-main + spacer(2);
    width: 67%;
    padding-right: 33%;
  }
  color: colour(footer);
  .buttons {
    @include k-media-above( break(medium) ) {
      @include k-hide-visually;
    }
  }
}
.site-colophon {
  @extend %text-smallest;
  @include links( colour(footer-link), false, colour(highlight), $link-border: false );
  color: colour(footer);
}
