// ==== LAYOUT ==== //

// == WRAPPERS == //

// These wrappers allow for backgrounds and layout options to be defined for each of the four sections (header, content, sidebar, and footer)
// There is also a fifth meta-wrapper to bind content and sidebar on large screens

body {
  @include k-media-above( break(large) ) {
    background: k-colour(shark);
  }
}

// A general wrapper for various site elements
%wrap {
  box-sizing: border-box; // Makes life a little easier
  @include k-media-below( break(small) ) {
    @include rem( padding-left, spacer(1/2) );
    @include rem( padding-right, spacer(1/2) );
  }
  @include k-media-between( break(small), break(medium) ) {
    @include rem( padding-left, spacer() );
    @include rem( padding-right, spacer() );
  }
  @include k-media-above( break(medium) ) {
    @include rem( padding-left, spacer(1.5) );
    @include rem( padding-right, spacer(1.5) );
  }
}
.wrap-header,
.wrap-sidebar {
  @include k-media-above( break(large) ) {
    @include rem( padding-left, spacer() );
    float: right;
    width: 33%;
  }
}
.wrap-header {
  @extend %wrap;
  @include rem( padding-top, spacer() );
  background: k-colour(mako);
  position: relative; // Contains #site-interface, which is absolutely positioned
}
.wrap-main {
  @extend %clearfix-below;
}
.wrap-sidebar {
  @extend %wrap;
  @include rem( padding-top, spacer() );
  @include rem( padding-bottom, spacer() );
}
.wrap-content {
  @extend %wrap;
  @include rem( padding-top, spacer() );
  @include rem( padding-bottom, spacer() );
  background: colour(body-bg);
  @include k-media-above( break(large) ) {
    @include rem( padding-right, spacer() );
    float: left;
    width: 67%;
  }
}
.wrap-footer {
  @extend %wrap;
  background: k-colour(athens-gray);
  position: relative; // For use with the "Back to top" button
}



// == HEADER == //

.site-header {
  position: relative; // For use with the skip link and menu toggle
  @include k-media-above( break(large) ) {
    max-width: $width-content - $width-main;
  }
}
.site-branding {
  @include rem( padding-bottom, spacer(1.5) );
  position: relative;
  &:hover .site-description { // Show site description on hover
    opacity: 1;
    transition: opacity .5s ease;
  }
}
.site-title {
  @extend %clearfix-below;
  @include font-size(head);
  @include font-style(site-title);
  @include k-media-above( break(medium) ) {
    @include font-size(head-biggest);
  }
  a {
    color: colour(site-title);
    display: inline-block;
    text-decoration: none;
    &:hover {
      color: colour(highlight);
    }
  }
}
.site-description {
  @extend %clearfix-below;
  @include font-size(text-smaller);
  @include font-style(site-description);
  color: colour(site-desc);
  opacity: 0;
  transition: opacity .8s ease-out;
  //@extend %hide-below-medium; // Hide the site description on smaller screens
  @include k-hide-visually;
}
.site-navigation {
  @include k-media-below( break(medium) ) {
    display: none;
  }
  .search-form {
    @include rem( margin-bottom, spacer(1/2) );
    @include k-media-above( break(medium) ) {
      //display: none;
    }
  }
  &.active {
    display: block;
  }
}



// == CONTENT == //

.site-content {
  @extend %clearfix-below;
  max-width: $width-main; // Keeps content contained regardless of whether sidebar appears
  &:focus {
    outline: none; // Prevent weird blue glow when using the skip link
  }

  @include k-media-above( break(large) ) {
    margin-left: auto;
  }

  // Individual articles within the content area
  article {
    @extend %spacer-below-triple;
  }
}
main {
  @extend %clearfix; // Mainly for gallery view (in which main is filed with floating figure elements)
}



// == SIDEBAR == //

// See also: `_widgets.scss`
.widget-area {
  max-width: $width-main;
  @include k-media-between( break(small), break(large) ) {
    @include rem( column-gap, spacer(2) );
    column-count: 2;
    .widget {
      //break-inside: avoid; // Weird bug in Chrome
    }
  }
  @include k-media-above( break(large) ) {
    max-width: $width-content - $width-main;
  }
}



// == FOOTER == //

.site-footer {
  @extend %links-meta-no-border;
  //@include k-center-block( $width-content );
  @include rem( padding-bottom, spacer() );
  color: colour(footer);
}
.site-footer-buttons {
  @extend %button-container;
  @include k-media-above( break(medium) ) {
    @include k-hide-visually;
  }
}
.site-footer-info {
  @extend %text-smallest;
}
